

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiseK9 Security - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'wise-red': '#dc2626',
                        'wise-dark': '#1a1a1a',
                        'wise-gray': '#2d2d2d'
                    }
                }
            }
        }
    </script>
    <style>
        .sidebar-transition { transition: all 0.3s ease-in-out; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .loading-skeleton { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .chart-container { position: relative; height: 300px; }
        .star-rating { color: #fbbf24; }
        .notification-badge { animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-10px); } 60% { transform: translateY(-5px); } }
    </style>
</head>
<body class="bg-wise-dark text-white font-sans">
    <!-- Top Navigation -->
    <nav class="bg-wise-gray border-b border-gray-700 px-6 py-4 fixed w-full top-0 z-50">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button id="sidebarToggle" class="text-white hover:text-wise-red transition-colors">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shield-alt text-wise-red text-2xl"></i>
                    <h1 class="text-xl font-bold">WiseK9 Security</h1>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="hidden md:flex items-center bg-gray-800 rounded-lg px-4 py-2 w-96">
                <i class="fas fa-search text-gray-400 mr-3"></i>
                <input type="text" placeholder="Search clients, guards, reports..." class="bg-transparent text-white placeholder-gray-400 w-full focus:outline-none">
            </div>
            
            <!-- User Profile & Notifications -->
            <div class="flex items-center space-x-4">
                <button class="relative text-white hover:text-wise-red transition-colors">
                    <i class="fas fa-bell text-xl"></i>
                    <span class="absolute -top-2 -right-2 bg-wise-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center notification-badge">7</span>
                </button>
                <div class="flex items-center space-x-2 cursor-pointer hover:bg-gray-700 rounded-lg px-3 py-2 transition-colors">
                    <div class="w-8 h-8 bg-wise-red rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <span class="hidden md:block">Admin User</span>
                    <i class="fas fa-chevron-down text-sm"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside id="sidebar" class="fixed left-0 top-16 h-full bg-wise-gray w-64 sidebar-transition z-40 border-r border-gray-700">
        <nav class="p-4">
            <ul class="space-y-2">
                <li><a href="#" onclick="showSection('dashboard')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors text-wise-red bg-gray-700">
                    <i class="fas fa-home"></i><span>Dashboard</span>
                </a></li>
                <li><a href="#" onclick="showSection('services')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-shield-alt"></i><span>Services</span>
                </a></li>
                <li><a href="#" onclick="showSection('clients')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-users"></i><span>Clients</span>
                </a></li>
                <li><a href="#" onclick="showSection('staff')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-user-tie"></i><span>Staff & Scheduling</span>
                </a></li>
                <li><a href="#" onclick="showSection('quotes')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-file-invoice"></i><span>Quote Requests</span>
                </a></li>
                <li><a href="#" onclick="showSection('analytics')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-chart-pie"></i><span>Usage Analytics</span>
                </a></li>
                <li><a href="#" onclick="showSection('reviews')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-star"></i><span>Reviews</span>
                    <span class="bg-wise-red text-white text-xs rounded-full px-2 py-1 ml-auto">12</span>
                </a></li>
                <li><a href="#" onclick="showSection('messages')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-envelope"></i><span>Messages & Reservations</span>
                    <span class="bg-blue-600 text-white text-xs rounded-full px-2 py-1 ml-auto">8</span>
                </a></li>
                <li><a href="#" onclick="showSection('reports')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-chart-bar"></i><span>Reports</span>
                </a></li>
                <li><a href="#" onclick="showSection('settings')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-cog"></i><span>Settings</span>
                </a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main id="mainContent" class="ml-64 mt-16 p-6 sidebar-transition min-h-screen">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section fade-in">
            <!-- Breadcrumb -->
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Dashboard</li>
                </ol>
            </nav>

            <h2 class="text-3xl font-bold mb-8">Dashboard Overview</h2>
            
            <!-- KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Active Clients</p>
                            <p class="text-2xl font-bold text-white">247</p>
                            <p class="text-green-400 text-sm"><i class="fas fa-arrow-up"></i> +12% this month</p>
                        </div>
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Guards On Duty</p>
                            <p class="text-2xl font-bold text-white">89</p>
                            <p class="text-blue-400 text-sm"><i class="fas fa-clock"></i> 24/7 Coverage</p>
                        </div>
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-user-shield text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">UK Coverage</p>
                            <p class="text-2xl font-bold text-white">78%</p>
                            <p class="text-yellow-400 text-sm"><i class="fas fa-map-marker-alt"></i> 156 Locations</p>
                        </div>
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-map text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">New Leads</p>
                            <p class="text-2xl font-bold text-white">34</p>
                            <p class="text-green-400 text-sm"><i class="fas fa-arrow-up"></i> +8 this week</p>
                        </div>
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-handshake text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Service Requests Over Time</h3>
                    <div class="chart-container">
                        <canvas id="lineChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Service Distribution</h3>
                    <div class="chart-container">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                <h3 class="text-xl font-semibold mb-4">Recent Activity</h3>
                <div class="space-y-4">
                    <div class="flex items-center space-x-4 p-3 bg-gray-800 rounded-lg">
                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                        <div class="flex-1">
                            <p class="text-white">New client registration: Tesco Manchester</p>
                            <p class="text-gray-400 text-sm">2 hours ago</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4 p-3 bg-gray-800 rounded-lg">
                        <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
                        <div class="flex-1">
                            <p class="text-white">Guard shift started: John Smith at Retail Park Leeds</p>
                            <p class="text-gray-400 text-sm">4 hours ago</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4 p-3 bg-gray-800 rounded-lg">
                        <div class="w-2 h-2 bg-yellow-400 rounded-full"></div>
                        <div class="flex-1">
                            <p class="text-white">Quote request received: Construction Site Security</p>
                            <p class="text-gray-400 text-sm">6 hours ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services Section -->
        <div id="services" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Services</li>
                </ol>
            </nav>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Services Management</h2>
                <button onclick="openServiceModal()" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                    <i class="fas fa-plus mr-2"></i>Add Service
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="servicesGrid">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-service-id="1">
                    <div class="flex items-center justify-between mb-4">
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-store text-white text-xl"></i>
                        </div>
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Retail Security</h3>
                    <p class="text-gray-400 mb-4">Professional security services for retail establishments, shopping centers, and commercial properties.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-wise-red font-semibold">From £15/hour</span>
                        <div class="space-x-2">
                            <button onclick="editService(1)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteService(1)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-service-id="2">
                    <div class="flex items-center justify-between mb-4">
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-building text-white text-xl"></i>
                        </div>
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Corporate Security</h3>
                    <p class="text-gray-400 mb-4">Comprehensive security solutions for corporate offices, business parks, and industrial facilities.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-wise-red font-semibold">From £18/hour</span>
                        <div class="space-x-2">
                            <button onclick="editService(2)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteService(2)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-service-id="3">
                    <div class="flex items-center justify-between mb-4">
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="fas fa-calendar-alt text-white text-xl"></i>
                        </div>
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Event Security</h3>
                    <p class="text-gray-400 mb-4">Specialized security services for events, concerts, festivals, and private functions.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-wise-red font-semibold">From £20/hour</span>
                        <div class="space-x-2">
                            <button onclick="editService(3)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteService(3)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clients Section -->
        <div id="clients" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Clients</li>
                </ol>
            </nav>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Client Management</h2>
                <button onclick="openClientModal()" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                    <i class="fas fa-plus mr-2"></i>Add Client
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-wise-gray p-4 rounded-lg border border-gray-700 mb-6">
                <div class="flex flex-wrap gap-4">
                    <select class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600">
                        <option>All Clients</option>
                        <option>Active</option>
                        <option>Inactive</option>
                    </select>
                    <select class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600">
                        <option>All Services</option>
                        <option>Retail Security</option>
                        <option>Corporate Security</option>
                        <option>Event Security</option>
                    </select>
                    <input type="text" placeholder="Search clients..." class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600 flex-1 min-w-64">
                </div>
            </div>

            <!-- Clients Table -->
            <div class="bg-wise-gray rounded-lg border border-gray-700 overflow-hidden">
                <table class="w-full" id="clientsTable">
                    <thead class="bg-gray-800">
                        <tr>
                            <th class="text-left p-4">Client Name</th>
                            <th class="text-left p-4">Contact</th>
                            <th class="text-left p-4">Service Type</th>
                            <th class="text-left p-4">Contract Status</th>
                            <th class="text-left p-4">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-t border-gray-700" data-client-id="1">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">T</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Tesco Manchester</p>
                                        <p class="text-gray-400 text-sm">Retail Chain</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <p>manager@tesco.com</p>
                                <p class="text-gray-400 text-sm">+44 161 123 4567</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Retail Security</span>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewClient(1)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-eye"></i></button>
                                    <button onclick="editClient(1)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                    <button onclick="deleteClient(1)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-client-id="2">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">M</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">MediaCity UK</p>
                                        <p class="text-gray-400 text-sm">Corporate Complex</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <p>security@mediacityuk.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 161 987 6543</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs">Corporate Security</span>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewClient(2)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-eye"></i></button>
                                    <button onclick="editClient(2)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                    <button onclick="deleteClient(2)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Staff Section -->
        <div id="staff" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Staff & Scheduling</li>
                </ol>
            </nav>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Staff Management & Scheduling</h2>
                <div class="flex space-x-3">
                    <button onclick="openStaffModal()" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-plus mr-2"></i>Add Staff Member
                    </button>
                    <button onclick="exportStaff()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-download mr-2"></i>Export Staff
                    </button>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Total Staff</h3>
                    <p class="text-3xl font-bold text-wise-red" id="totalStaffCount">156</p>
                    <p class="text-gray-400 text-sm">All employees</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">On Duty Now</h3>
                    <p class="text-3xl font-bold text-green-400">89</p>
                    <p class="text-gray-400 text-sm">Currently working</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Available</h3>
                    <p class="text-3xl font-bold text-blue-400">67</p>
                    <p class="text-gray-400 text-sm">Ready for assignment</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Off Duty</h3>
                    <p class="text-3xl font-bold text-gray-400">24</p>
                    <p class="text-gray-400 text-sm">Not scheduled</p>
                </div>
            </div>

            <!-- Staff Filters -->
            <div class="bg-wise-gray p-4 rounded-lg border border-gray-700 mb-6">
                <div class="flex flex-wrap gap-4">
                    <select id="positionFilter" class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600" onchange="filterStaff()">
                        <option value="all">All Positions</option>
                        <option value="Security Guard">Security Guards</option>
                        <option value="Senior Guard">Senior Guards</option>
                        <option value="Team Leader">Team Leaders</option>
                        <option value="Supervisor">Supervisors</option>
                        <option value="Manager">Managers</option>
                        <option value="K9 Handler">K9 Handlers</option>
                    </select>
                    <select id="statusFilter" class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600" onchange="filterStaff()">
                        <option value="all">All Status</option>
                        <option value="on-duty">On Duty</option>
                        <option value="available">Available</option>
                        <option value="off-duty">Off Duty</option>
                        <option value="on-leave">On Leave</option>
                    </select>
                    <select id="locationFilter" class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600" onchange="filterStaff()">
                        <option value="all">All Locations</option>
                        <option value="Manchester">Manchester</option>
                        <option value="Leeds">Leeds</option>
                        <option value="Birmingham">Birmingham</option>
                        <option value="Liverpool">Liverpool</option>
                    </select>
                    <input type="text" id="staffSearch" placeholder="Search staff..." class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600 flex-1 min-w-64" oninput="filterStaff()">
                </div>
            </div>

            <!-- Staff Table -->
            <div class="bg-wise-gray rounded-lg border border-gray-700 overflow-hidden">
                <table class="w-full" id="staffTable">
                    <thead class="bg-gray-800">
                        <tr>
                            <th class="text-left p-4">Staff Member</th>
                            <th class="text-left p-4">Position</th>
                            <th class="text-left p-4">Contact</th>
                            <th class="text-left p-4">Location</th>
                            <th class="text-left p-4">Status</th>
                            <th class="text-left p-4">Shift</th>
                            <th class="text-left p-4">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="staffTableBody">
                        <tr class="border-t border-gray-700" data-staff-id="1" data-position="Security Guard" data-status="on-duty" data-location="Manchester">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">JS</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">John Smith</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK001</p>
                                        <p class="text-gray-400 text-xs">Joined: Jan 2023</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Security Guard</span>
                                <p class="text-gray-400 text-sm mt-1">Level 2 Certified</p>
                            </td>
                            <td class="p-4">
                                <p>john.smith@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 161 555 0101</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Manchester</p>
                                <p class="text-gray-400 text-sm">Tesco Store</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">On Duty</span>
                                <p class="text-gray-400 text-sm mt-1">Since 06:00</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Day Shift</p>
                                <p class="text-gray-400 text-sm">06:00 - 18:00</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(1)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(1)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(1)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(1)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-staff-id="2" data-position="Senior Guard" data-status="on-duty" data-location="Leeds">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">MJ</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Mike Johnson</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK002</p>
                                        <p class="text-gray-400 text-xs">Joined: Mar 2022</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs">Senior Guard</span>
                                <p class="text-gray-400 text-sm mt-1">Level 3 Certified</p>
                            </td>
                            <td class="p-4">
                                <p>mike.johnson@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 113 555 0102</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Leeds</p>
                                <p class="text-gray-400 text-sm">MediaCity UK</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">On Duty</span>
                                <p class="text-gray-400 text-sm mt-1">Since 18:00</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Night Shift</p>
                                <p class="text-gray-400 text-sm">18:00 - 06:00</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(2)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(2)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(2)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(2)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-staff-id="3" data-position="Team Leader" data-status="available" data-location="Birmingham">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">SW</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Sarah Williams</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK003</p>
                                        <p class="text-gray-400 text-xs">Joined: Jun 2021</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-orange-600 text-white px-2 py-1 rounded-full text-xs">Team Leader</span>
                                <p class="text-gray-400 text-sm mt-1">Level 4 Certified</p>
                            </td>
                            <td class="p-4">
                                <p>sarah.williams@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 121 555 0103</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Birmingham</p>
                                <p class="text-gray-400 text-sm">Construction Site</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Available</span>
                                <p class="text-gray-400 text-sm mt-1">Ready for duty</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Flexible</p>
                                <p class="text-gray-400 text-sm">Any shift</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(3)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(3)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(3)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(3)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-staff-id="4" data-position="K9 Handler" data-status="on-duty" data-location="Liverpool">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">DB</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">David Brown</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK004</p>
                                        <p class="text-gray-400 text-xs">Joined: Sep 2020</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">K9 Handler</span>
                                <p class="text-gray-400 text-sm mt-1">Specialist Certified</p>
                            </td>
                            <td class="p-4">
                                <p>david.brown@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 151 555 0104</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Liverpool</p>
                                <p class="text-gray-400 text-sm">Port Security</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">On Duty</span>
                                <p class="text-gray-400 text-sm mt-1">With K9 Rex</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Day Shift</p>
                                <p class="text-gray-400 text-sm">08:00 - 20:00</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(4)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(4)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(4)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(4)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-staff-id="5" data-position="Supervisor" data-status="off-duty" data-location="Manchester">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">LT</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Lisa Taylor</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK005</p>
                                        <p class="text-gray-400 text-xs">Joined: Feb 2019</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs">Supervisor</span>
                                <p class="text-gray-400 text-sm mt-1">Management Level</p>
                            </td>
                            <td class="p-4">
                                <p>lisa.taylor@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 161 555 0105</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Manchester</p>
                                <p class="text-gray-400 text-sm">Regional Office</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-gray-600 text-white px-2 py-1 rounded-full text-xs">Off Duty</span>
                                <p class="text-gray-400 text-sm mt-1">Weekend off</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Office Hours</p>
                                <p class="text-gray-400 text-sm">09:00 - 17:00</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(5)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(5)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(5)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(5)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t border-gray-700" data-staff-id="6" data-position="Manager" data-status="available" data-location="Leeds">
                            <td class="p-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">RW</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Robert Wilson</p>
                                        <p class="text-gray-400 text-sm">Employee ID: WK006</p>
                                        <p class="text-gray-400 text-xs">Joined: Nov 2018</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">
                                <span class="bg-yellow-600 text-white px-2 py-1 rounded-full text-xs">Manager</span>
                                <p class="text-gray-400 text-sm mt-1">Senior Management</p>
                            </td>
                            <td class="p-4">
                                <p>robert.wilson@wisek9.co.uk</p>
                                <p class="text-gray-400 text-sm">+44 113 555 0106</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Leeds</p>
                                <p class="text-gray-400 text-sm">Regional Manager</p>
                            </td>
                            <td class="p-4">
                                <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Available</span>
                                <p class="text-gray-400 text-sm mt-1">On call</p>
                            </td>
                            <td class="p-4">
                                <p class="font-semibold">Flexible</p>
                                <p class="text-gray-400 text-sm">As needed</p>
                            </td>
                            <td class="p-4">
                                <div class="flex space-x-2">
                                    <button onclick="viewStaff(6)" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                                    <button onclick="editStaff(6)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                    <button onclick="scheduleStaff(6)" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                                    <button onclick="deleteStaff(6)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-6">
                <button class="bg-wise-red hover:bg-red-700 px-6 py-3 rounded-lg transition-colors">
                    <i class="fas fa-chevron-down mr-2"></i>Load More Staff (150 remaining)
                </button>
            </div>
        </div>

        <!-- Quotes Section -->
        <div id="quotes" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Quote Requests</li>
                </ol>
            </nav>

            <h2 class="text-3xl font-bold mb-8">Quote Requests</h2>

            <!-- Quote Cards -->
            <div class="space-y-6">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-xl font-semibold">Construction Site Security</h3>
                            <p class="text-gray-400">Submitted by: BuildCorp Ltd</p>
                            <p class="text-gray-400 text-sm">2 hours ago</p>
                        </div>
                        <span class="bg-yellow-600 text-white px-3 py-1 rounded-full text-sm">Pending</span>
                    </div>
                    <p class="text-gray-300 mb-4">Need 24/7 security for construction site in Birmingham. Site covers 5 acres with multiple access points. Looking for 2-3 guards per shift.</p>
                    <div class="flex space-x-3">
                        <button class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-check mr-2"></i>Approve
                        </button>
                        <button class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-reply mr-2"></i>Respond
                        </button>
                        <button class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-times mr-2"></i>Reject
                        </button>
                    </div>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-xl font-semibold">Event Security - Music Festival</h3>
                            <p class="text-gray-400">Submitted by: EventPro Manchester</p>
                            <p class="text-gray-400 text-sm">1 day ago</p>
                        </div>
                        <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm">In Progress</span>
                    </div>
                    <p class="text-gray-300 mb-4">3-day music festival expecting 15,000 attendees. Need crowd control, VIP area security, and backstage protection. Event dates: July 15-17.</p>
                    <div class="flex space-x-3">
                        <button class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-check mr-2"></i>Approve
                        </button>
                        <button class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-reply mr-2"></i>Respond
                        </button>
                        <button class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-times mr-2"></i>Reject
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage Analytics Section -->
        <div id="analytics" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Usage Analytics</li>
                </ol>
            </nav>

            <h2 class="text-3xl font-bold mb-8">Service Usage Analytics</h2>

            <!-- Purpose Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Theft Prevention</p>
                            <p class="text-2xl font-bold text-white">156</p>
                            <p class="text-green-400 text-sm"><i class="fas fa-arrow-up"></i> Most Popular</p>
                        </div>
                        <div class="bg-red-600 p-3 rounded-full">
                            <i class="fas fa-shield-alt text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Access Control</p>
                            <p class="text-2xl font-bold text-white">89</p>
                            <p class="text-blue-400 text-sm"><i class="fas fa-key"></i> 36% of clients</p>
                        </div>
                        <div class="bg-blue-600 p-3 rounded-full">
                            <i class="fas fa-door-open text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Crowd Control</p>
                            <p class="text-2xl font-bold text-white">67</p>
                            <p class="text-purple-400 text-sm"><i class="fas fa-users"></i> Events Focus</p>
                        </div>
                        <div class="bg-purple-600 p-3 rounded-full">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm">Asset Protection</p>
                            <p class="text-2xl font-bold text-white">43</p>
                            <p class="text-orange-400 text-sm"><i class="fas fa-box"></i> High Value</p>
                        </div>
                        <div class="bg-orange-600 p-3 rounded-full">
                            <i class="fas fa-lock text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Purpose Analytics Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Security Purpose Distribution</h3>
                    <div class="chart-container">
                        <canvas id="purposeChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Purpose Trends Over Time</h3>
                    <div class="chart-container">
                        <canvas id="purposeTrendChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Detailed Purpose Breakdown -->
            <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 mb-8">
                <h3 class="text-xl font-semibold mb-6">Detailed Purpose Analysis</h3>
                
                <div class="space-y-6">
                    <!-- Theft Prevention -->
                    <div class="border border-gray-700 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-red-600 p-2 rounded-full">
                                    <i class="fas fa-shield-alt text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold">Theft Prevention</h4>
                                    <p class="text-gray-400 text-sm">156 active clients</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-red-400">63%</p>
                                <p class="text-gray-400 text-sm">of total usage</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Top Sector</p>
                                <p class="font-semibold">Retail Stores</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Avg. Duration</p>
                                <p class="font-semibold">8.5 hours/day</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Success Rate</p>
                                <p class="font-semibold text-green-400">94.2%</p>
                            </div>
                        </div>
                    </div>

                    <!-- Access Control -->
                    <div class="border border-gray-700 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-blue-600 p-2 rounded-full">
                                    <i class="fas fa-door-open text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold">Access Control</h4>
                                    <p class="text-gray-400 text-sm">89 active clients</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-blue-400">36%</p>
                                <p class="text-gray-400 text-sm">of total usage</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Top Sector</p>
                                <p class="font-semibold">Corporate Offices</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Avg. Duration</p>
                                <p class="font-semibold">12 hours/day</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Success Rate</p>
                                <p class="font-semibold text-green-400">98.7%</p>
                            </div>
                        </div>
                    </div>

                    <!-- Crowd Control -->
                    <div class="border border-gray-700 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-purple-600 p-2 rounded-full">
                                    <i class="fas fa-users text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold">Crowd Control</h4>
                                    <p class="text-gray-400 text-sm">67 active clients</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-purple-400">27%</p>
                                <p class="text-gray-400 text-sm">of total usage</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Top Sector</p>
                                <p class="font-semibold">Events & Venues</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Avg. Duration</p>
                                <p class="font-semibold">6 hours/event</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Success Rate</p>
                                <p class="font-semibold text-green-400">91.8%</p>
                            </div>
                        </div>
                    </div>

                    <!-- Asset Protection -->
                    <div class="border border-gray-700 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="bg-orange-600 p-2 rounded-full">
                                    <i class="fas fa-lock text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold">Asset Protection</h4>
                                    <p class="text-gray-400 text-sm">43 active clients</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-orange-400">17%</p>
                                <p class="text-gray-400 text-sm">of total usage</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Top Sector</p>
                                <p class="font-semibold">Construction Sites</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Avg. Duration</p>
                                <p class="font-semibold">24 hours/day</p>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <p class="text-gray-400">Success Rate</p>
                                <p class="font-semibold text-green-400">96.5%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Client Purpose Mapping -->
            <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                <h3 class="text-xl font-semibold mb-4">Recent Client Purpose Assignments</h3>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-800">
                            <tr>
                                <th class="text-left p-4">Client Name</th>
                                <th class="text-left p-4">Primary Purpose</th>
                                <th class="text-left p-4">Secondary Purpose</th>
                                <th class="text-left p-4">Service Type</th>
                                <th class="text-left p-4">Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t border-gray-700">
                                <td class="p-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-wise-red rounded-full flex items-center justify-center">
                                            <span class="text-white text-sm font-semibold">T</span>
                                        </div>
                                        <span>Tesco Manchester</span>
                                    </div>
                                </td>
                                <td class="p-4">
                                    <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs">Theft Prevention</span>
                                </td>
                                <td class="p-4">
                                    <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Access Control</span>
                                </td>
                                <td class="p-4">Retail Security</td>
                                <td class="p-4">8 hours/day</td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="p-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-wise-red rounded-full flex items-center justify-center">
                                            <span class="text-white text-sm font-semibold">M</span>
                                        </div>
                                        <span>MediaCity UK</span>
                                    </div>
                                </td>
                                <td class="p-4">
                                    <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Access Control</span>
                                </td>
                                <td class="p-4">
                                    <span class="bg-orange-600 text-white px-2 py-1 rounded-full text-xs">Asset Protection</span>
                                </td>
                                <td class="p-4">Corporate Security</td>
                                <td class="p-4">12 hours/day</td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="p-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-wise-red rounded-full flex items-center justify-center">
                                            <span class="text-white text-sm font-semibold">E</span>
                                        </div>
                                        <span>EventPro Manchester</span>
                                    </div>
                                </td>
                                <td class="p-4">
                                    <span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs">Crowd Control</span>
                                </td>
                                <td class="p-4">
                                    <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs">Theft Prevention</span>
                                </td>
                                <td class="p-4">Event Security</td>
                                <td class="p-4">6 hours/event</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reviews Section -->
        <div id="reviews" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Reviews</li>
                </ol>
            </nav>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Client Reviews & Feedback Management</h2>
                <div class="flex space-x-3">
                    <select id="reviewFilter" class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600" onchange="filterReviews()">
                        <option value="all">All Reviews</option>
                        <option value="5">5 Stars</option>
                        <option value="4">4 Stars</option>
                        <option value="3">3 Stars</option>
                        <option value="2">2 Stars</option>
                        <option value="1">1 Star</option>
                        <option value="pending">Pending Response</option>
                        <option value="responded">Responded</option>
                    </select>
                    <select id="serviceFilter" class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600" onchange="filterReviews()">
                        <option value="all">All Services</option>
                        <option value="retail">Retail Security</option>
                        <option value="corporate">Corporate Security</option>
                        <option value="event">Event Security</option>
                        <option value="construction">Construction Security</option>
                    </select>
                    <button onclick="exportReviews()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-download mr-2"></i>Export Reviews
                    </button>
                </div>
            </div>

            <!-- Review Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="text-center">
                        <p class="text-3xl font-bold text-yellow-400">4.8</p>
                        <div class="flex justify-center space-x-1 my-2">
                            <i class="fas fa-star star-rating"></i>
                            <i class="fas fa-star star-rating"></i>
                            <i class="fas fa-star star-rating"></i>
                            <i class="fas fa-star star-rating"></i>
                            <i class="fas fa-star star-rating"></i>
                        </div>
                        <p class="text-gray-400 text-sm">Average Rating</p>
                        <p class="text-gray-400 text-xs">Based on 247 reviews</p>
                    </div>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Total Reviews</h3>
                    <p class="text-3xl font-bold text-blue-400">247</p>
                    <p class="text-green-400 text-sm"><i class="fas fa-arrow-up"></i> +18 this month</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Positive Reviews</h3>
                    <p class="text-3xl font-bold text-green-400">92%</p>
                    <p class="text-gray-400 text-sm">4-5 star ratings</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Response Rate</h3>
                    <p class="text-3xl font-bold text-purple-400">98%</p>
                    <p class="text-gray-400 text-sm">Reviews responded to</p>
                </div>
            </div>

            <!-- Reviews List -->
            <div class="space-y-6" id="reviewsList">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-review-id="1" data-rating="5" data-service="retail" data-status="responded">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">JD</span>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    John Davies
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs ml-2">VERIFIED CLIENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">Tesco Manchester - Store Manager</p>
                                <p class="text-gray-400 text-xs">Client ID: #TC001 | Contract: 12 months</p>
                                <div class="flex space-x-1 mt-1">
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">RESPONDED</span>
                            <span class="text-gray-400 text-sm">2 days ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToReview(1)" class="text-blue-400 hover:text-blue-300" title="Reply"><i class="fas fa-reply"></i></button>
                                <button onclick="editReview(1)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                <button onclick="flagReview(1)" class="text-orange-400 hover:text-orange-300" title="Flag"><i class="fas fa-flag"></i></button>
                                <button onclick="deleteReview(1)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Excellent security service! The guards are professional, punctual, and very attentive. They've significantly improved our store's security and customer confidence. Highly recommend WiseK9 Security for retail establishments."</p>
                    <div class="flex items-center justify-between">
                        <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">Retail Security</span>
                        <div class="flex items-center space-x-4 text-sm text-gray-400">
                            <span><i class="fas fa-thumbs-up mr-1"></i> 12 helpful</span>
                            <span><i class="fas fa-flag mr-1"></i> Report</span>
                        </div>
                    </div>
                    <div class="mt-4 p-4 bg-gray-800 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-reply text-wise-red"></i>
                            <span class="font-semibold text-wise-red">WiseK9 Security Response</span>
                            <span class="text-gray-400 text-sm">1 day ago</span>
                        </div>
                        <p class="text-gray-300">Thank you for your wonderful feedback, John! We're delighted to hear that our security team is meeting your expectations. We'll continue to maintain the highest standards of service for Tesco Manchester.</p>
                    </div>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-review-id="2" data-rating="4" data-service="corporate" data-status="pending">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">SM</span>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Sarah Mitchell
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs ml-2">VERIFIED CLIENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">MediaCity UK - Security Manager</p>
                                <p class="text-gray-400 text-xs">Client ID: #MC002 | Contract: 24 months</p>
                                <div class="flex space-x-1 mt-1">
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star text-gray-400 text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="bg-yellow-600 text-white px-2 py-1 rounded-full text-xs notification-badge">PENDING</span>
                            <span class="text-gray-400 text-sm">5 days ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToReview(2)" class="text-blue-400 hover:text-blue-300" title="Reply"><i class="fas fa-reply"></i></button>
                                <button onclick="editReview(2)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                <button onclick="flagReview(2)" class="text-orange-400 hover:text-orange-300" title="Flag"><i class="fas fa-flag"></i></button>
                                <button onclick="deleteReview(2)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Very professional corporate security service. The access control system works flawlessly and the guards are well-trained. Only minor issue was a slight delay in shift handover last week, but overall very satisfied with the service."</p>
                    <div class="flex items-center justify-between">
                        <span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs">Corporate Security</span>
                        <div class="flex items-center space-x-4 text-sm text-gray-400">
                            <span><i class="fas fa-thumbs-up mr-1"></i> 8 helpful</span>
                            <span><i class="fas fa-flag mr-1"></i> Report</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-clock text-yellow-400"></i>
                            <span class="font-semibold text-yellow-400">Pending Response</span>
                        </div>
                        <p class="text-gray-300 text-sm">This review is awaiting your response.</p>
                    </div>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-review-id="3" data-rating="5" data-service="event" data-status="responded">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">MR</span>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Mike Roberts
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs ml-2">VERIFIED CLIENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">EventPro Manchester - Event Coordinator</p>
                                <p class="text-gray-400 text-xs">Client ID: #EP003 | Contract: Project-based</p>
                                <div class="flex space-x-1 mt-1">
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">RESPONDED</span>
                            <span class="text-gray-400 text-sm">1 week ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToReview(3)" class="text-blue-400 hover:text-blue-300" title="Reply"><i class="fas fa-reply"></i></button>
                                <button onclick="editReview(3)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                <button onclick="flagReview(3)" class="text-orange-400 hover:text-orange-300" title="Flag"><i class="fas fa-flag"></i></button>
                                <button onclick="deleteReview(3)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Outstanding event security for our music festival! The crowd control was expertly managed, and the team handled a capacity crowd of 15,000 with ease. Professional, courteous, and highly effective. Will definitely use WiseK9 for future events."</p>
                    <div class="flex items-center justify-between">
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Event Security</span>
                        <div class="flex items-center space-x-4 text-sm text-gray-400">
                            <span><i class="fas fa-thumbs-up mr-1"></i> 24 helpful</span>
                            <button onclick="moderateReview(3)" class="text-orange-400 hover:text-orange-300"><i class="fas fa-shield-alt mr-1"></i> Moderate</button>
                        </div>
                    </div>
                    <div class="mt-4 p-4 bg-gray-800 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-reply text-wise-red"></i>
                            <span class="font-semibold text-wise-red">WiseK9 Security Response</span>
                            <span class="text-gray-400 text-sm">6 days ago</span>
                        </div>
                        <p class="text-gray-300">Thank you Mike! We're thrilled the event security exceeded your expectations. Our team takes pride in professional crowd management and we look forward to securing your future events.</p>
                    </div>
                </div>

                <!-- New Critical Review -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 border-l-4 border-l-red-500" data-review-id="4" data-rating="2" data-service="retail" data-status="pending">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">AL</span>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Amanda Lewis
                                    <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs ml-2">CRITICAL</span>
                                    <span class="bg-orange-600 text-white px-2 py-1 rounded-full text-xs ml-2">URGENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">SuperMart Leeds - Operations Manager</p>
                                <p class="text-gray-400 text-xs">Client ID: #SM004 | Contract: 6 months</p>
                                <div class="flex space-x-1 mt-1">
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star text-gray-400 text-sm"></i>
                                    <i class="fas fa-star text-gray-400 text-sm"></i>
                                    <i class="fas fa-star text-gray-400 text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs notification-badge">URGENT RESPONSE NEEDED</span>
                            <span class="text-gray-400 text-sm">3 hours ago</span>
                            <div class="flex space-x-2">
                                <button onclick="priorityResponse(4)" class="text-red-400 hover:text-red-300" title="Priority Response"><i class="fas fa-exclamation-triangle"></i></button>
                                <button onclick="replyToReview(4)" class="text-blue-400 hover:text-blue-300" title="Reply"><i class="fas fa-reply"></i></button>
                                <button onclick="escalateReview(4)" class="text-orange-400 hover:text-orange-300" title="Escalate"><i class="fas fa-arrow-up"></i></button>
                                <button onclick="deleteReview(4)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Very disappointed with the service quality. The guard assigned to our store has been consistently late and unprofessional. Yesterday, he was on his phone during his shift and missed a shoplifting incident. This is unacceptable for the premium we're paying. Considering switching providers."</p>
                    <div class="flex items-center justify-between">
                        <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs">Retail Security</span>
                        <div class="flex items-center space-x-4 text-sm text-gray-400">
                            <span class="text-red-400"><i class="fas fa-exclamation-triangle mr-1"></i> Requires immediate attention</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-red-900 bg-opacity-30 border border-red-600 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-clock text-red-400"></i>
                            <span class="font-semibold text-red-400">Action Required</span>
                        </div>
                        <p class="text-gray-300 text-sm">This critical review requires immediate management response within 2 hours.</p>
                    </div>
                </div>

                <!-- Positive Review -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700" data-review-id="5" data-rating="5" data-service="construction" data-status="responded">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">BC</span>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    BuildCorp Construction
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs ml-2">VERIFIED CLIENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">Site Manager - Birmingham Project</p>
                                <p class="text-gray-400 text-xs">Client ID: #BC005 | Contract: 8 months</p>
                                <div class="flex space-x-1 mt-1">
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                    <i class="fas fa-star star-rating text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">RESPONDED</span>
                            <span class="text-gray-400 text-sm">4 days ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToReview(5)" class="text-blue-400 hover:text-blue-300" title="Reply"><i class="fas fa-reply"></i></button>
                                <button onclick="editReview(5)" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                                <button onclick="featureReview(5)" class="text-green-400 hover:text-green-300" title="Feature"><i class="fas fa-star"></i></button>
                                <button onclick="deleteReview(5)" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Exceptional construction site security! The 24/7 coverage has been flawless and the guards are highly professional. They've prevented multiple break-in attempts and maintain excellent communication with our site management. Worth every penny!"</p>
                    <div class="flex items-center justify-between">
                        <span class="bg-orange-600 text-white px-2 py-1 rounded-full text-xs">Construction Security</span>
                        <div class="flex items-center space-x-4 text-sm text-gray-400">
                            <span><i class="fas fa-thumbs-up mr-1"></i> 15 helpful</span>
                            <span class="text-green-400"><i class="fas fa-star mr-1"></i> Featured Review</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-8">
                <button class="bg-wise-red hover:bg-red-700 px-6 py-3 rounded-lg transition-colors">
                    <i class="fas fa-chevron-down mr-2"></i>Load More Reviews
                </button>
            </div>
        </div>

        <!-- Messages & Reservations Section -->
        <div id="messages" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Messages & Reservations</li>
                </ol>
            </nav>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Messages & Security Reservations</h2>
                <div class="flex space-x-3">
                    <select class="bg-gray-800 text-white px-3 py-2 rounded border border-gray-600">
                        <option>All Messages</option>
                        <option>Unread</option>
                        <option>Reservations</option>
                        <option>General Inquiries</option>
                        <option>Complaints</option>
                    </select>
                    <button onclick="composeMessage()" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-plus mr-2"></i>New Message
                    </button>
                </div>
            </div>

            <!-- Message Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Unread Messages</h3>
                    <p class="text-3xl font-bold text-wise-red">8</p>
                    <p class="text-gray-400 text-sm">Require attention</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">New Reservations</h3>
                    <p class="text-3xl font-bold text-blue-400">12</p>
                    <p class="text-green-400 text-sm"><i class="fas fa-arrow-up"></i> +3 today</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Pending Confirmations</h3>
                    <p class="text-3xl font-bold text-yellow-400">5</p>
                    <p class="text-gray-400 text-sm">Awaiting response</p>
                </div>
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Response Time</h3>
                    <p class="text-3xl font-bold text-green-400">2.3h</p>
                    <p class="text-gray-400 text-sm">Average response</p>
                </div>
            </div>

            <!-- Messages List -->
            <div class="space-y-4" id="messagesList">
                <!-- Security Reservation Message -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 border-l-4 border-l-blue-500" data-message-id="1">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-calendar-check text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Security Reservation Request
                                    <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs ml-2">RESERVATION</span>
                                    <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs ml-2">UNREAD</span>
                                </h4>
                                <p class="text-gray-400 text-sm">From: BuildCorp Construction Ltd</p>
                                <p class="text-gray-400 text-sm">Email: security@buildcorp.co.uk | Phone: +44 121 555 0123</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">3 hours ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToMessage(1)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-reply"></i></button>
                                <button onclick="editMessage(1)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                <button onclick="deleteMessage(1)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg mb-4">
                        <h5 class="font-semibold mb-2">Reservation Details:</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div><strong>Service Type:</strong> Construction Site Security</div>
                            <div><strong>Location:</strong> Birmingham Construction Site, B12 9QR</div>
                            <div><strong>Start Date:</strong> March 25, 2024</div>
                            <div><strong>Duration:</strong> 6 months (24/7 coverage)</div>
                            <div><strong>Guards Needed:</strong> 2-3 per shift</div>
                            <div><strong>Budget:</strong> £15,000/month</div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"We need comprehensive security for our new construction project in Birmingham. The site covers 8 acres with multiple access points and valuable equipment. We require 24/7 coverage with 2-3 guards per shift. The project will run for approximately 6 months. Please provide a detailed quote and availability confirmation."</p>
                    <div class="flex space-x-3">
                        <button onclick="approveReservation(1)" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-check mr-2"></i>Approve Reservation
                        </button>
                        <button onclick="requestMoreInfo(1)" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-info-circle mr-2"></i>Request More Info
                        </button>
                        <button onclick="declineReservation(1)" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-times mr-2"></i>Decline
                        </button>
                    </div>
                </div>

                <!-- General Inquiry Message -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 border-l-4 border-l-green-500" data-message-id="2">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-question-circle text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Service Inquiry - Retail Security
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs ml-2">INQUIRY</span>
                                </h4>
                                <p class="text-gray-400 text-sm">From: ASDA Superstore Leeds</p>
                                <p class="text-gray-400 text-sm">Email: manager@asda-leeds.co.uk | Phone: +44 113 555 0456</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">1 day ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToMessage(2)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-reply"></i></button>
                                <button onclick="editMessage(2)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                <button onclick="deleteMessage(2)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"Hello, we're interested in your retail security services for our Leeds superstore. We've been experiencing some shoplifting issues and would like to discuss options for both uniformed and plainclothes security. Could you provide information about your services and pricing? We're open Monday-Sunday, 6 AM to 11 PM."</p>
                    <div class="flex space-x-3">
                        <button onclick="sendQuote(2)" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-file-invoice mr-2"></i>Send Quote
                        </button>
                        <button onclick="scheduleCall(2)" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-phone mr-2"></i>Schedule Call
                        </button>
                    </div>
                    <div class="mt-4 p-4 bg-gray-800 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <i class="fas fa-reply text-wise-red"></i>
                            <span class="font-semibold text-wise-red">Your Response</span>
                            <span class="text-gray-400 text-sm">6 hours ago</span>
                        </div>
                        <p class="text-gray-300">Thank you for your inquiry. I've sent you a detailed quote for both uniformed and plainclothes security options. Our team can provide coverage during your operating hours with flexible scheduling. I'll call you tomorrow to discuss the proposal.</p>
                    </div>
                </div>

                <!-- Event Security Reservation -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 border-l-4 border-l-purple-500" data-message-id="3">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-music text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Event Security Reservation - Music Festival
                                    <span class="bg-purple-600 text-white px-2 py-1 rounded-full text-xs ml-2">EVENT</span>
                                    <span class="bg-yellow-600 text-white px-2 py-1 rounded-full text-xs ml-2">PENDING</span>
                                </h4>
                                <p class="text-gray-400 text-sm">From: Manchester Music Events Ltd</p>
                                <p class="text-gray-400 text-sm">Email: bookings@manchestermusic.co.uk | Phone: +44 161 555 0789</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">2 days ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToMessage(3)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-reply"></i></button>
                                <button onclick="editMessage(3)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                <button onclick="deleteMessage(3)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg mb-4">
                        <h5 class="font-semibold mb-2">Event Details:</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div><strong>Event:</strong> Summer Music Festival 2024</div>
                            <div><strong>Location:</strong> Heaton Park, Manchester</div>
                            <div><strong>Date:</strong> July 15-17, 2024 (3 days)</div>
                            <div><strong>Expected Attendance:</strong> 25,000 per day</div>
                            <div><strong>Security Needed:</strong> Crowd control, VIP, backstage</div>
                            <div><strong>Budget:</strong> £45,000 total</div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"We're organizing a 3-day music festival in Heaton Park expecting 25,000 attendees per day. We need comprehensive security including crowd control, VIP area protection, backstage security, and perimeter control. The event runs from 12 PM to 11 PM each day. Can you provide a team of experienced event security personnel?"</p>
                    <div class="flex space-x-3">
                        <button onclick="confirmReservation(3)" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-check mr-2"></i>Confirm Booking
                        </button>
                        <button onclick="negotiateTerms(3)" class="bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-handshake mr-2"></i>Negotiate Terms
                        </button>
                    </div>
                </div>

                <!-- Complaint Message -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 border-l-4 border-l-red-500" data-message-id="4">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-exclamation-triangle text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold flex items-center">
                                    Service Complaint - Guard Punctuality
                                    <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs ml-2">COMPLAINT</span>
                                    <span class="bg-orange-600 text-white px-2 py-1 rounded-full text-xs ml-2">URGENT</span>
                                </h4>
                                <p class="text-gray-400 text-sm">From: Westfield Shopping Centre</p>
                                <p class="text-gray-400 text-sm">Email: security@westfield.co.uk | Phone: +44 20 555 0321</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-400 text-sm">4 hours ago</span>
                            <div class="flex space-x-2">
                                <button onclick="replyToMessage(4)" class="text-blue-400 hover:text-blue-300"><i class="fas fa-reply"></i></button>
                                <button onclick="editMessage(4)" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                                <button onclick="deleteMessage(4)" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">"We've had issues with guard punctuality this week. On Monday, the morning shift guard arrived 45 minutes late, and yesterday there was a 30-minute gap between shifts. This is unacceptable for a busy shopping centre. We need immediate action to resolve this issue or we'll have to consider alternative security providers."</p>
                    <div class="flex space-x-3">
                        <button onclick="escalateComplaint(4)" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-exclamation-circle mr-2"></i>Escalate Issue
                        </button>
                        <button onclick="scheduleUrgentMeeting(4)" class="bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-calendar-alt mr-2"></i>Schedule Meeting
                        </button>
                        <button onclick="offerCompensation(4)" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors">
                            <i class="fas fa-gift mr-2"></i>Offer Compensation
                        </button>
                    </div>
                </div>
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-8">
                <button class="bg-wise-red hover:bg-red-700 px-6 py-3 rounded-lg transition-colors">
                    <i class="fas fa-chevron-down mr-2"></i>Load More Messages
                </button>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Reports</li>
                </ol>
            </nav>

            <h2 class="text-3xl font-bold mb-8">Reports & Analytics</h2>

            <!-- Report Generation -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <div class="bg-wise-red p-3 rounded-full mr-4">
                            <i class="fas fa-users text-white"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Client Activity Report</h3>
                    </div>
                    <p class="text-gray-400 mb-4">Generate detailed reports on client engagement and service usage.</p>
                    <button class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors w-full">
                        <i class="fas fa-download mr-2"></i>Generate PDF
                    </button>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <div class="bg-wise-red p-3 rounded-full mr-4">
                            <i class="fas fa-user-shield text-white"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Guard Performance</h3>
                    </div>
                    <p class="text-gray-400 mb-4">Analyze guard attendance, performance metrics, and feedback scores.</p>
                    <button class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors w-full">
                        <i class="fas fa-download mr-2"></i>Generate PDF
                    </button>
                </div>

                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <div class="bg-wise-red p-3 rounded-full mr-4">
                            <i class="fas fa-exclamation-triangle text-white"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Incident Reports</h3>
                    </div>
                    <p class="text-gray-400 mb-4">Comprehensive incident tracking and analysis reports.</p>
                    <button class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors w-full">
                        <i class="fas fa-download mr-2"></i>Generate PDF
                    </button>
                </div>
            </div>

            <!-- Recent Reports -->
            <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                <h3 class="text-xl font-semibold mb-4">Recent Reports</h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-file-pdf text-red-400"></i>
                            <div>
                                <p class="font-semibold">Monthly Client Activity - March 2024</p>
                                <p class="text-gray-400 text-sm">Generated 2 days ago</p>
                            </div>
                        </div>
                        <button class="text-blue-400 hover:text-blue-300">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-file-csv text-green-400"></i>
                            <div>
                                <p class="font-semibold">Guard Performance Q1 2024</p>
                                <p class="text-gray-400 text-sm">Generated 1 week ago</p>
                            </div>
                        </div>
                        <button class="text-blue-400 hover:text-blue-300">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="section hidden fade-in">
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-400">
                    <li><i class="fas fa-home"></i></li>
                    <li><i class="fas fa-chevron-right mx-2"></i></li>
                    <li class="text-white">Settings</li>
                </ol>
            </nav>

            <h2 class="text-3xl font-bold mb-8">Settings</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Company Profile -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Company Profile</h3>
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Company Name</label>
                            <input type="text" value="WiseK9 Security" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Contact Email</label>
                            <input type="email" value="admin@wisek9security.co.uk" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Phone Number</label>
                            <input type="tel" value="+44 161 123 4567" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        </div>
                        <button type="submit" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors">
                            Save Changes
                        </button>
                    </form>
                </div>

                <!-- User Management -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">User Management</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                            <div>
                                <p class="font-semibold">Admin User</p>
                                <p class="text-gray-400 text-sm">Superadmin</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="text-blue-400 hover:text-blue-300"><i class="fas fa-edit"></i></button>
                                <button class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <button class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors w-full">
                            <i class="fas fa-plus mr-2"></i>Add New User
                        </button>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Security Settings</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold">Two-Factor Authentication</p>
                                <p class="text-gray-400 text-sm">Add extra security to your account</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-wise-red"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold">Session Timeout</p>
                                <p class="text-gray-400 text-sm">Auto-logout after inactivity</p>
                            </div>
                            <select class="bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                                <option>30 minutes</option>
                                <option>1 hour</option>
                                <option>2 hours</option>
                                <option>4 hours</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Theme Settings -->
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700">
                    <h3 class="text-xl font-semibold mb-4">Appearance</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold">Dark Mode</p>
                                <p class="text-gray-400 text-sm">Toggle dark/light theme</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-wise-red"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Service Modal -->
    <div id="serviceModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-wise-gray p-6 rounded-lg w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Add New Service</h3>
                <button onclick="closeServiceModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="space-y-4" id="serviceForm">
                <div>
                    <label class="block text-sm font-medium mb-2">Service Name</label>
                    <input type="text" id="serviceName" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="e.g., Construction Site Security">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Description</label>
                    <textarea id="serviceDescription" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white h-24" placeholder="Service description..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Hourly Rate (£)</label>
                    <input type="number" id="serviceRate" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="15">
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors flex-1">
                        Add Service
                    </button>
                    <button type="button" onclick="closeServiceModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Modal -->
    <div id="clientModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-wise-gray p-6 rounded-lg w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Add New Client</h3>
                <button onclick="closeClientModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="space-y-4" id="clientForm">
                <div>
                    <label class="block text-sm font-medium mb-2">Company Name</label>
                    <input type="text" id="clientName" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="e.g., ABC Corporation">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Contact Email</label>
                    <input type="email" id="clientEmail" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="contact@company.com">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Phone Number</label>
                    <input type="tel" id="clientPhone" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="+44 123 456 7890">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Service Type</label>
                    <select id="clientService" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        <option>Retail Security</option>
                        <option>Corporate Security</option>
                        <option>Event Security</option>
                        <option>Construction Security</option>
                    </select>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors flex-1">
                        Add Client
                    </button>
                    <button type="button" onclick="closeClientModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Staff Modal -->
    <div id="staffModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-wise-gray p-6 rounded-lg w-full max-w-2xl mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Add New Staff Member</h3>
                <button onclick="closeStaffModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="space-y-4" id="staffForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">First Name</label>
                        <input type="text" id="staffFirstName" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="John">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Last Name</label>
                        <input type="text" id="staffLastName" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="Smith">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" id="staffEmail" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="john.smith@wisek9.co.uk">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Phone</label>
                        <input type="tel" id="staffPhone" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="+44 161 555 0000">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Position</label>
                        <select id="staffPosition" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="Security Guard">Security Guard</option>
                            <option value="Senior Guard">Senior Guard</option>
                            <option value="Team Leader">Team Leader</option>
                            <option value="Supervisor">Supervisor</option>
                            <option value="Manager">Manager</option>
                            <option value="K9 Handler">K9 Handler</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Location</label>
                        <select id="staffLocation" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="Manchester">Manchester</option>
                            <option value="Leeds">Leeds</option>
                            <option value="Birmingham">Birmingham</option>
                            <option value="Liverpool">Liverpool</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Status</label>
                        <select id="staffStatus" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="available">Available</option>
                            <option value="on-duty">On Duty</option>
                            <option value="off-duty">Off Duty</option>
                            <option value="on-leave">On Leave</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Certification Level</label>
                        <select id="staffCertification" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="Level 1 Certified">Level 1 Certified</option>
                            <option value="Level 2 Certified">Level 2 Certified</option>
                            <option value="Level 3 Certified">Level 3 Certified</option>
                            <option value="Level 4 Certified">Level 4 Certified</option>
                            <option value="Specialist Certified">Specialist Certified</option>
                            <option value="Management Level">Management Level</option>
                            <option value="Senior Management">Senior Management</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Shift Type</label>
                        <select id="staffShift" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="Day Shift">Day Shift</option>
                            <option value="Night Shift">Night Shift</option>
                            <option value="Flexible">Flexible</option>
                            <option value="Office Hours">Office Hours</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Join Date</label>
                        <input type="date" id="staffJoinDate" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Assignment/Location Details</label>
                    <input type="text" id="staffAssignment" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="e.g., Tesco Store, Construction Site">
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors flex-1">
                        Add Staff Member
                    </button>
                    <button type="button" onclick="closeStaffModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reply Modal -->
    <div id="replyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-wise-gray p-6 rounded-lg w-full max-w-2xl mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Reply to Message</h3>
                <button onclick="closeReplyModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="space-y-4" id="replyForm">
                <div>
                    <label class="block text-sm font-medium mb-2">Subject</label>
                    <input type="text" id="replySubject" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white" placeholder="Re: Original Subject">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Message</label>
                    <textarea id="replyMessage" class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white h-32" placeholder="Type your reply..."></textarea>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="bg-wise-red hover:bg-red-700 px-4 py-2 rounded transition-colors flex-1">
                        <i class="fas fa-paper-plane mr-2"></i>Send Reply
                    </button>
                    <button type="button" onclick="closeReplyModal()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let currentEditId = null;
        let currentEditType = null;

        // Sidebar toggle functionality
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const sidebarToggle = document.getElementById('sidebarToggle');
        let sidebarOpen = true;

        sidebarToggle.addEventListener('click', () => {
            sidebarOpen = !sidebarOpen;
            if (sidebarOpen) {
                sidebar.style.transform = 'translateX(0)';
                mainContent.style.marginLeft = '16rem';
            } else {
                sidebar.style.transform = 'translateX(-100%)';
                mainContent.style.marginLeft = '0';
            }
        });

        // Section navigation
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update navigation active state
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('text-wise-red', 'bg-gray-700');
            });
            event.target.classList.add('text-wise-red', 'bg-gray-700');
        }

        // Modal functions
        function openServiceModal() {
            document.getElementById('serviceModal').classList.remove('hidden');
        }

        function closeServiceModal() {
            document.getElementById('serviceModal').classList.add('hidden');
            document.getElementById('serviceForm').reset();
            currentEditId = null;
            currentEditType = null;
        }

        function openClientModal() {
            document.getElementById('clientModal').classList.remove('hidden');
        }

        function closeClientModal() {
            document.getElementById('clientModal').classList.add('hidden');
            document.getElementById('clientForm').reset();
            currentEditId = null;
            currentEditType = null;
        }

        function openStaffModal() {
            document.getElementById('staffModal').classList.remove('hidden');
        }

        function closeStaffModal() {
            document.getElementById('staffModal').classList.add('hidden');
            document.getElementById('staffForm').reset();
            currentEditId = null;
            currentEditType = null;
        }

        function closeReplyModal() {
            document.getElementById('replyModal').classList.add('hidden');
            document.getElementById('replyForm').reset();
        }

        // Service CRUD functions
        function editService(serviceId) {
            currentEditId = serviceId;
            currentEditType = 'service';
            
            // Get service data from DOM
            const serviceElement = document.querySelector(`[data-service-id="${serviceId}"]`);
            if (serviceElement) {
                const name = serviceElement.querySelector('h3').textContent;
                const description = serviceElement.querySelector('p').textContent;
                const rate = serviceElement.querySelector('.text-wise-red').textContent.replace('From £', '').replace('/hour', '');
                
                document.getElementById('serviceName').value = name;
                document.getElementById('serviceDescription').value = description;
                document.getElementById('serviceRate').value = rate;
                document.querySelector('#serviceModal h3').textContent = 'Edit Service';
                document.querySelector('#serviceForm button[type="submit"]').innerHTML = '<i class="fas fa-save mr-2"></i>Update Service';
                openServiceModal();
            }
        }

        function deleteService(serviceId) {
            if (confirm('Are you sure you want to delete this service? This action cannot be undone.')) {
                const serviceElement = document.querySelector(`[data-service-id="${serviceId}"]`);
                if (serviceElement) {
                    serviceElement.style.transform = 'scale(0.8)';
                    serviceElement.style.opacity = '0';
                    setTimeout(() => {
                        serviceElement.remove();
                        showNotification('Service deleted successfully!', 'success');
                        updateServiceCount();
                    }, 300);
                }
            }
        }

        function addNewService(name, description, rate) {
            const servicesGrid = document.getElementById('servicesGrid');
            const newServiceId = Date.now(); // Simple ID generation
            const icons = ['fas fa-store', 'fas fa-building', 'fas fa-calendar-alt', 'fas fa-hard-hat', 'fas fa-shield-alt'];
            const randomIcon = icons[Math.floor(Math.random() * icons.length)];
            
            const serviceHTML = `
                <div class="bg-wise-gray p-6 rounded-lg border border-gray-700 transform scale-0 transition-all duration-300" data-service-id="${newServiceId}">
                    <div class="flex items-center justify-between mb-4">
                        <div class="bg-wise-red p-3 rounded-full">
                            <i class="${randomIcon} text-white text-xl"></i>
                        </div>
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">${name}</h3>
                    <p class="text-gray-400 mb-4">${description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-wise-red font-semibold">From £${rate}/hour</span>
                        <div class="space-x-2">
                            <button onclick="editService(${newServiceId})" class="text-blue-400 hover:text-blue-300"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteService(${newServiceId})" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            `;
            
            servicesGrid.insertAdjacentHTML('beforeend', serviceHTML);
            
            // Animate in
            setTimeout(() => {
                const newElement = document.querySelector(`[data-service-id="${newServiceId}"]`);
                newElement.style.transform = 'scale(1)';
            }, 100);
        }

        function updateService(serviceId, name, description, rate) {
            const serviceElement = document.querySelector(`[data-service-id="${serviceId}"]`);
            if (serviceElement) {
                serviceElement.querySelector('h3').textContent = name;
                serviceElement.querySelector('p').textContent = description;
                serviceElement.querySelector('.text-wise-red').textContent = `From £${rate}/hour`;
                
                // Flash update animation
                serviceElement.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    serviceElement.style.backgroundColor = '';
                }, 1000);
                
                showNotification('Service updated successfully!', 'success');
            }
        }

        // Client CRUD functions
        function viewClient(clientId) {
            const clientRow = document.querySelector(`tr[data-client-id="${clientId}"]`);
            if (clientRow) {
                const clientName = clientRow.querySelector('p.font-semibold').textContent;
                const clientType = clientRow.querySelector('p.text-gray-400').textContent;
                const email = clientRow.querySelectorAll('td')[1].querySelector('p').textContent;
                const phone = clientRow.querySelectorAll('td')[1].querySelector('p.text-gray-400').textContent;
                
                alert(`Client Details:\n\nName: ${clientName}\nType: ${clientType}\nEmail: ${email}\nPhone: ${phone}`);
            }
        }

        function editClient(clientId) {
            currentEditId = clientId;
            currentEditType = 'client';
            
            const clientRow = document.querySelector(`tr[data-client-id="${clientId}"]`);
            if (clientRow) {
                const name = clientRow.querySelector('p.font-semibold').textContent;
                const email = clientRow.querySelectorAll('td')[1].querySelector('p').textContent;
                const phone = clientRow.querySelectorAll('td')[1].querySelector('p.text-gray-400').textContent;
                const service = clientRow.querySelector('span.bg-blue-600, span.bg-purple-600, span.bg-green-600, span.bg-orange-600').textContent;
                
                document.getElementById('clientName').value = name;
                document.getElementById('clientEmail').value = email;
                document.getElementById('clientPhone').value = phone;
                document.getElementById('clientService').value = service;
                document.querySelector('#clientModal h3').textContent = 'Edit Client';
                document.querySelector('#clientForm button[type="submit"]').innerHTML = '<i class="fas fa-save mr-2"></i>Update Client';
                openClientModal();
            }
        }

        function deleteClient(clientId) {
            if (confirm('Are you sure you want to delete this client? This action cannot be undone.')) {
                const clientRow = document.querySelector(`tr[data-client-id="${clientId}"]`);
                if (clientRow) {
                    clientRow.style.transform = 'translateX(-100%)';
                    clientRow.style.opacity = '0';
                    setTimeout(() => {
                        clientRow.remove();
                        showNotification('Client deleted successfully!', 'success');
                        updateClientCount();
                    }, 300);
                }
            }
        }

        function addNewClient(name, email, phone, service) {
            const clientsTable = document.querySelector('#clientsTable tbody');
            const newClientId = Date.now();
            const initial = name.charAt(0).toUpperCase();
            const serviceColors = {
                'Retail Security': 'bg-blue-600',
                'Corporate Security': 'bg-purple-600',
                'Event Security': 'bg-green-600',
                'Construction Security': 'bg-orange-600'
            };
            
            const clientHTML = `
                <tr class="border-t border-gray-700 transform translate-x-full transition-all duration-300" data-client-id="${newClientId}">
                    <td class="p-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">${initial}</span>
                            </div>
                            <div>
                                <p class="font-semibold">${name}</p>
                                <p class="text-gray-400 text-sm">New Client</p>
                            </div>
                        </div>
                    </td>
                    <td class="p-4">
                        <p>${email}</p>
                        <p class="text-gray-400 text-sm">${phone}</p>
                    </td>
                    <td class="p-4">
                        <span class="${serviceColors[service]} text-white px-2 py-1 rounded-full text-xs">${service}</span>
                    </td>
                    <td class="p-4">
                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Active</span>
                    </td>
                    <td class="p-4">
                        <div class="flex space-x-2">
                            <button onclick="viewClient(${newClientId})" class="text-blue-400 hover:text-blue-300"><i class="fas fa-eye"></i></button>
                            <button onclick="editClient(${newClientId})" class="text-yellow-400 hover:text-yellow-300"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteClient(${newClientId})" class="text-red-400 hover:text-red-300"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                </tr>
            `;
            
            clientsTable.insertAdjacentHTML('beforeend', clientHTML);
            
            // Animate in
            setTimeout(() => {
                const newRow = document.querySelector(`tr[data-client-id="${newClientId}"]`);
                newRow.style.transform = 'translateX(0)';
            }, 100);
        }

        function updateClient(clientId, name, email, phone, service) {
            const clientRow = document.querySelector(`tr[data-client-id="${clientId}"]`);
            if (clientRow) {
                const initial = name.charAt(0).toUpperCase();
                const serviceColors = {
                    'Retail Security': 'bg-blue-600',
                    'Corporate Security': 'bg-purple-600',
                    'Event Security': 'bg-green-600',
                    'Construction Security': 'bg-orange-600'
                };
                
                clientRow.querySelector('span.text-white.font-semibold').textContent = initial;
                clientRow.querySelector('p.font-semibold').textContent = name;
                clientRow.querySelectorAll('td')[1].querySelector('p').textContent = email;
                clientRow.querySelectorAll('td')[1].querySelector('p.text-gray-400').textContent = phone;
                
                const serviceSpan = clientRow.querySelector('span.bg-blue-600, span.bg-purple-600, span.bg-green-600, span.bg-orange-600');
                serviceSpan.className = `${serviceColors[service]} text-white px-2 py-1 rounded-full text-xs`;
                serviceSpan.textContent = service;
                
                // Flash update animation
                clientRow.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    clientRow.style.backgroundColor = '';
                }, 1000);
                
                showNotification('Client updated successfully!', 'success');
            }
        }

        // Review functions
        function replyToReview(reviewId) {
            const reviewElement = document.querySelector(`[data-review-id="${reviewId}"]`);
            const clientName = reviewElement.querySelector('h4').textContent.split('\n')[0].trim();
            document.getElementById('replySubject').value = `Re: Review Response - ${clientName}`;
            document.getElementById('replyModal').classList.remove('hidden');
        }

        function editReview(reviewId) {
            const reviewElement = document.querySelector(`[data-review-id="${reviewId}"]`);
            const reviewText = reviewElement.querySelector('p.text-gray-300').textContent;
            const newText = prompt('Edit review text:', reviewText);
            
            if (newText && newText !== reviewText) {
                reviewElement.querySelector('p.text-gray-300').textContent = newText;
                
                // Flash update animation
                reviewElement.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    reviewElement.style.backgroundColor = '';
                }, 1000);
                
                showNotification('Review updated successfully!', 'success');
            }
        }

        function deleteReview(reviewId) {
            if (confirm('Are you sure you want to delete this review? This action cannot be undone.')) {
                const reviewElement = document.querySelector(`[data-review-id="${reviewId}"]`);
                if (reviewElement) {
                    reviewElement.style.transform = 'scale(0.8)';
                    reviewElement.style.opacity = '0';
                    setTimeout(() => {
                        reviewElement.remove();
                        showNotification('Review deleted successfully!', 'success');
                        updateReviewCount();
                    }, 300);
                }
            }
        }

        function flagReview(reviewId) {
            if (confirm('Flag this review for moderation?')) {
                showNotification('Review flagged for moderation review', 'warning');
            }
        }

        function moderateReview(reviewId) {
            showNotification('Review moderation panel opened', 'info');
        }

        function priorityResponse(reviewId) {
            document.getElementById('replySubject').value = 'Urgent Response - Service Quality Concern';
            document.getElementById('replyMessage').value = 'Dear Amanda,\n\nThank you for bringing this serious matter to our attention. We sincerely apologize for the unprofessional service you experienced. This is not the standard we maintain at WiseK9 Security.\n\nI am personally investigating this incident and will contact you within the next hour to discuss immediate corrective actions and compensation.\n\nBest regards,\nManagement Team';
            document.getElementById('replyModal').classList.remove('hidden');
        }

        function escalateReview(reviewId) {
            showNotification('Review escalated to senior management', 'warning');
        }

        function featureReview(reviewId) {
            if (confirm('Feature this review on your public testimonials?')) {
                showNotification('Review featured successfully!', 'success');
            }
        }

        function filterReviews() {
            const ratingFilter = document.getElementById('reviewFilter').value;
            const serviceFilter = document.getElementById('serviceFilter').value;
            const reviews = document.querySelectorAll('[data-review-id]');
            
            reviews.forEach(review => {
                let showReview = true;
                
                // Filter by rating
                if (ratingFilter !== 'all') {
                    if (ratingFilter === 'pending' && review.dataset.status !== 'pending') {
                        showReview = false;
                    } else if (ratingFilter === 'responded' && review.dataset.status !== 'responded') {
                        showReview = false;
                    } else if (!isNaN(ratingFilter) && review.dataset.rating !== ratingFilter) {
                        showReview = false;
                    }
                }
                
                // Filter by service
                if (serviceFilter !== 'all' && review.dataset.service !== serviceFilter) {
                    showReview = false;
                }
                
                review.style.display = showReview ? 'block' : 'none';
            });
            
            showNotification('Reviews filtered successfully', 'info');
        }

        function exportReviews() {
            showNotification('Reviews exported to CSV file', 'success');
        }

        // Message functions
        function replyToMessage(messageId) {
            const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
            const subject = messageElement.querySelector('h4').textContent.split('\n')[0].trim();
            document.getElementById('replySubject').value = `Re: ${subject}`;
            document.getElementById('replyModal').classList.remove('hidden');
        }

        function editMessage(messageId) {
            const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
            const messageText = messageElement.querySelector('p.text-gray-300').textContent;
            const newText = prompt('Edit message text:', messageText);
            
            if (newText && newText !== messageText) {
                messageElement.querySelector('p.text-gray-300').textContent = newText;
                
                // Flash update animation
                messageElement.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    messageElement.style.backgroundColor = '';
                }, 1000);
                
                showNotification('Message updated successfully!', 'success');
            }
        }

        function deleteMessage(messageId) {
            if (confirm('Are you sure you want to delete this message? This action cannot be undone.')) {
                const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
                if (messageElement) {
                    messageElement.style.transform = 'translateX(-100%)';
                    messageElement.style.opacity = '0';
                    setTimeout(() => {
                        messageElement.remove();
                        showNotification('Message deleted successfully!', 'success');
                        updateMessageCount();
                    }, 300);
                }
            }
        }

        // Helper functions for updating counts
        function updateServiceCount() {
            const serviceCount = document.querySelectorAll('[data-service-id]').length;
            // Update any service count displays if they exist
        }

        function updateClientCount() {
            const clientCount = document.querySelectorAll('tr[data-client-id]').length;
            // Update client count in dashboard
            const clientCountElement = document.querySelector('.text-2xl.font-bold.text-white');
            if (clientCountElement) {
                clientCountElement.textContent = clientCount;
            }
        }

        function updateReviewCount() {
            const reviewCount = document.querySelectorAll('[data-review-id]').length;
            // Update review count in sidebar
            const reviewBadge = document.querySelector('a[onclick="showSection(\'reviews\')"] span');
            if (reviewBadge) {
                reviewBadge.textContent = reviewCount;
            }
        }

        function updateMessageCount() {
            const messageCount = document.querySelectorAll('[data-message-id]').length;
            // Update message count in sidebar
            const messageBadge = document.querySelector('a[onclick="showSection(\'messages\')"] span');
            if (messageBadge) {
                messageBadge.textContent = messageCount;
            }
        }

        // Reservation functions
        function approveReservation(messageId) {
            showNotification('Reservation approved! Confirmation email sent to client.', 'success');
        }

        function requestMoreInfo(messageId) {
            document.getElementById('replySubject').value = 'Additional Information Required';
            document.getElementById('replyMessage').value = 'Thank you for your reservation request. We need some additional information to provide you with the best security solution...';
            document.getElementById('replyModal').classList.remove('hidden');
        }

        function declineReservation(messageId) {
            if (confirm('Are you sure you want to decline this reservation?')) {
                showNotification('Reservation declined. Client will be notified.', 'info');
            }
        }

        function sendQuote(messageId) {
            showNotification('Quote generated and sent to client!', 'success');
        }

        function scheduleCall(messageId) {
            showNotification('Call scheduled for tomorrow at 10 AM', 'success');
        }

        function confirmReservation(messageId) {
            showNotification('Event reservation confirmed! Contract sent to client.', 'success');
        }

        function negotiateTerms(messageId) {
            document.getElementById('replySubject').value = 'Contract Terms Discussion';
            document.getElementById('replyMessage').value = 'Thank you for your event security request. We would like to discuss the terms and pricing...';
            document.getElementById('replyModal').classList.remove('hidden');
        }

        function escalateComplaint(messageId) {
            showNotification('Complaint escalated to management. Priority response initiated.', 'warning');
        }

        function scheduleUrgentMeeting(messageId) {
            showNotification('Urgent meeting scheduled for today at 2 PM', 'warning');
        }

        function offerCompensation(messageId) {
            showNotification('Compensation offer prepared and sent to client', 'info');
        }

        function composeMessage() {
            document.getElementById('replySubject').value = '';
            document.getElementById('replyMessage').value = '';
            document.getElementById('replyModal').classList.remove('hidden');
        }

        // Staff CRUD functions
        function viewStaff(staffId) {
            const staffRow = document.querySelector(`tr[data-staff-id="${staffId}"]`);
            if (staffRow) {
                const name = staffRow.querySelector('p.font-semibold').textContent;
                const employeeId = staffRow.querySelector('p.text-gray-400').textContent;
                const position = staffRow.querySelector('span.bg-blue-600, span.bg-purple-600, span.bg-orange-600, span.bg-green-600, span.bg-red-600, span.bg-yellow-600').textContent;
                const email = staffRow.querySelectorAll('td')[2].querySelector('p').textContent;
                const phone = staffRow.querySelectorAll('td')[2].querySelector('p.text-gray-400').textContent;
                const location = staffRow.querySelectorAll('td')[3].querySelector('p.font-semibold').textContent;
                const status = staffRow.querySelectorAll('td')[4].querySelector('span').textContent;
                
                alert(`Staff Details:\n\nName: ${name}\n${employeeId}\nPosition: ${position}\nEmail: ${email}\nPhone: ${phone}\nLocation: ${location}\nStatus: ${status}`);
            }
        }

        function editStaff(staffId) {
            currentEditId = staffId;
            currentEditType = 'staff';
            
            const staffRow = document.querySelector(`tr[data-staff-id="${staffId}"]`);
            if (staffRow) {
                const fullName = staffRow.querySelector('p.font-semibold').textContent.split(' ');
                const firstName = fullName[0];
                const lastName = fullName.slice(1).join(' ');
                const email = staffRow.querySelectorAll('td')[2].querySelector('p').textContent;
                const phone = staffRow.querySelectorAll('td')[2].querySelector('p.text-gray-400').textContent;
                const position = staffRow.dataset.position;
                const location = staffRow.dataset.location;
                const status = staffRow.dataset.status;
                const assignment = staffRow.querySelectorAll('td')[3].querySelector('p.text-gray-400').textContent;
                
                document.getElementById('staffFirstName').value = firstName;
                document.getElementById('staffLastName').value = lastName;
                document.getElementById('staffEmail').value = email;
                document.getElementById('staffPhone').value = phone;
                document.getElementById('staffPosition').value = position;
                document.getElementById('staffLocation').value = location;
                document.getElementById('staffStatus').value = status;
                document.getElementById('staffAssignment').value = assignment;
                
                document.querySelector('#staffModal h3').textContent = 'Edit Staff Member';
                document.querySelector('#staffForm button[type="submit"]').innerHTML = '<i class="fas fa-save mr-2"></i>Update Staff Member';
                openStaffModal();
            }
        }

        function deleteStaff(staffId) {
            if (confirm('Are you sure you want to delete this staff member? This action cannot be undone.')) {
                const staffRow = document.querySelector(`tr[data-staff-id="${staffId}"]`);
                if (staffRow) {
                    staffRow.style.transform = 'translateX(-100%)';
                    staffRow.style.opacity = '0';
                    setTimeout(() => {
                        staffRow.remove();
                        showNotification('Staff member deleted successfully!', 'success');
                        updateStaffCount();
                    }, 300);
                }
            }
        }

        function scheduleStaff(staffId) {
            const staffRow = document.querySelector(`tr[data-staff-id="${staffId}"]`);
            const staffName = staffRow.querySelector('p.font-semibold').textContent;
            showNotification(`Opening schedule for ${staffName}...`, 'info');
        }

        function addNewStaff(firstName, lastName, email, phone, position, location, status, certification, shift, joinDate, assignment) {
            const staffTableBody = document.getElementById('staffTableBody');
            const newStaffId = Date.now();
            const initials = firstName.charAt(0) + lastName.charAt(0);
            const fullName = `${firstName} ${lastName}`;
            
            const positionColors = {
                'Security Guard': 'bg-blue-600',
                'Senior Guard': 'bg-purple-600',
                'Team Leader': 'bg-orange-600',
                'Supervisor': 'bg-red-600',
                'Manager': 'bg-yellow-600',
                'K9 Handler': 'bg-green-600'
            };

            const statusColors = {
                'on-duty': 'bg-green-600',
                'available': 'bg-blue-600',
                'off-duty': 'bg-gray-600',
                'on-leave': 'bg-yellow-600'
            };

            const statusText = {
                'on-duty': 'On Duty',
                'available': 'Available',
                'off-duty': 'Off Duty',
                'on-leave': 'On Leave'
            };

            const employeeId = `WK${String(newStaffId).slice(-3)}`;
            const joinDateFormatted = new Date(joinDate).toLocaleDateString('en-GB', { month: 'short', year: 'numeric' });
            
            const staffHTML = `
                <tr class="border-t border-gray-700 transform translate-x-full transition-all duration-300" data-staff-id="${newStaffId}" data-position="${position}" data-status="${status}" data-location="${location}">
                    <td class="p-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-wise-red rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">${initials}</span>
                            </div>
                            <div>
                                <p class="font-semibold">${fullName}</p>
                                <p class="text-gray-400 text-sm">Employee ID: ${employeeId}</p>
                                <p class="text-gray-400 text-xs">Joined: ${joinDateFormatted}</p>
                            </div>
                        </div>
                    </td>
                    <td class="p-4">
                        <span class="${positionColors[position]} text-white px-2 py-1 rounded-full text-xs">${position}</span>
                        <p class="text-gray-400 text-sm mt-1">${certification}</p>
                    </td>
                    <td class="p-4">
                        <p>${email}</p>
                        <p class="text-gray-400 text-sm">${phone}</p>
                    </td>
                    <td class="p-4">
                        <p class="font-semibold">${location}</p>
                        <p class="text-gray-400 text-sm">${assignment}</p>
                    </td>
                    <td class="p-4">
                        <span class="${statusColors[status]} text-white px-2 py-1 rounded-full text-xs">${statusText[status]}</span>
                        <p class="text-gray-400 text-sm mt-1">Ready for duty</p>
                    </td>
                    <td class="p-4">
                        <p class="font-semibold">${shift}</p>
                        <p class="text-gray-400 text-sm">As scheduled</p>
                    </td>
                    <td class="p-4">
                        <div class="flex space-x-2">
                            <button onclick="viewStaff(${newStaffId})" class="text-blue-400 hover:text-blue-300" title="View Details"><i class="fas fa-eye"></i></button>
                            <button onclick="editStaff(${newStaffId})" class="text-yellow-400 hover:text-yellow-300" title="Edit"><i class="fas fa-edit"></i></button>
                            <button onclick="scheduleStaff(${newStaffId})" class="text-purple-400 hover:text-purple-300" title="Schedule"><i class="fas fa-calendar"></i></button>
                            <button onclick="deleteStaff(${newStaffId})" class="text-red-400 hover:text-red-300" title="Delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                </tr>
            `;
            
            staffTableBody.insertAdjacentHTML('beforeend', staffHTML);
            
            // Animate in
            setTimeout(() => {
                const newRow = document.querySelector(`tr[data-staff-id="${newStaffId}"]`);
                newRow.style.transform = 'translateX(0)';
            }, 100);
        }

        function updateStaff(staffId, firstName, lastName, email, phone, position, location, status, certification, shift, assignment) {
            const staffRow = document.querySelector(`tr[data-staff-id="${staffId}"]`);
            if (staffRow) {
                const initials = firstName.charAt(0) + lastName.charAt(0);
                const fullName = `${firstName} ${lastName}`;
                
                const positionColors = {
                    'Security Guard': 'bg-blue-600',
                    'Senior Guard': 'bg-purple-600',
                    'Team Leader': 'bg-orange-600',
                    'Supervisor': 'bg-red-600',
                    'Manager': 'bg-yellow-600',
                    'K9 Handler': 'bg-green-600'
                };

                const statusColors = {
                    'on-duty': 'bg-green-600',
                    'available': 'bg-blue-600',
                    'off-duty': 'bg-gray-600',
                    'on-leave': 'bg-yellow-600'
                };

                const statusText = {
                    'on-duty': 'On Duty',
                    'available': 'Available',
                    'off-duty': 'Off Duty',
                    'on-leave': 'On Leave'
                };
                
                // Update data attributes
                staffRow.dataset.position = position;
                staffRow.dataset.status = status;
                staffRow.dataset.location = location;
                
                // Update display
                staffRow.querySelector('span.text-white.font-semibold').textContent = initials;
                staffRow.querySelector('p.font-semibold').textContent = fullName;
                staffRow.querySelectorAll('td')[2].querySelector('p').textContent = email;
                staffRow.querySelectorAll('td')[2].querySelector('p.text-gray-400').textContent = phone;
                staffRow.querySelectorAll('td')[3].querySelector('p.font-semibold').textContent = location;
                staffRow.querySelectorAll('td')[3].querySelector('p.text-gray-400').textContent = assignment;
                
                const positionSpan = staffRow.querySelector('span.bg-blue-600, span.bg-purple-600, span.bg-orange-600, span.bg-red-600, span.bg-yellow-600, span.bg-green-600');
                positionSpan.className = `${positionColors[position]} text-white px-2 py-1 rounded-full text-xs`;
                positionSpan.textContent = position;
                
                const statusSpan = staffRow.querySelectorAll('td')[4].querySelector('span');
                statusSpan.className = `${statusColors[status]} text-white px-2 py-1 rounded-full text-xs`;
                statusSpan.textContent = statusText[status];
                
                staffRow.querySelectorAll('td')[5].querySelector('p.font-semibold').textContent = shift;
                
                // Flash update animation
                staffRow.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    staffRow.style.backgroundColor = '';
                }, 1000);
                
                showNotification('Staff member updated successfully!', 'success');
            }
        }

        function filterStaff() {
            const positionFilter = document.getElementById('positionFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const locationFilter = document.getElementById('locationFilter').value;
            const searchTerm = document.getElementById('staffSearch').value.toLowerCase();
            
            const staffRows = document.querySelectorAll('tr[data-staff-id]');
            
            staffRows.forEach(row => {
                let showRow = true;
                
                // Filter by position
                if (positionFilter !== 'all' && row.dataset.position !== positionFilter) {
                    showRow = false;
                }
                
                // Filter by status
                if (statusFilter !== 'all' && row.dataset.status !== statusFilter) {
                    showRow = false;
                }
                
                // Filter by location
                if (locationFilter !== 'all' && row.dataset.location !== locationFilter) {
                    showRow = false;
                }
                
                // Filter by search term
                if (searchTerm && !row.textContent.toLowerCase().includes(searchTerm)) {
                    showRow = false;
                }
                
                row.style.display = showRow ? 'table-row' : 'none';
            });
            
            showNotification('Staff filtered successfully', 'info');
        }

        function exportStaff() {
            const staffData = Array.from(document.querySelectorAll('tr[data-staff-id]')).map(row => ({
                name: row.querySelector('p.font-semibold').textContent,
                employeeId: row.querySelector('p.text-gray-400').textContent,
                position: row.dataset.position,
                email: row.querySelectorAll('td')[2].querySelector('p').textContent,
                phone: row.querySelectorAll('td')[2].querySelector('p.text-gray-400').textContent,
                location: row.dataset.location,
                status: row.dataset.status,
                assignment: row.querySelectorAll('td')[3].querySelector('p.text-gray-400').textContent
            }));
            
            if (staffData.length > 0) {
                const csv = convertToCSV(staffData);
                downloadCSV(csv, 'staff_members.csv');
                showNotification('Staff data exported successfully!', 'success');
            }
        }

        function updateStaffCount() {
            const staffCount = document.querySelectorAll('tr[data-staff-id]').length;
            const totalStaffElement = document.getElementById('totalStaffCount');
            if (totalStaffElement) {
                totalStaffElement.textContent = staffCount;
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;
            
            const colors = {
                success: 'bg-green-600 text-white',
                error: 'bg-red-600 text-white',
                warning: 'bg-yellow-600 text-white',
                info: 'bg-blue-600 text-white'
            };
            
            notification.className += ` ${colors[type]}`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Form submission handlers
        document.getElementById('serviceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('serviceName').value;
            const description = document.getElementById('serviceDescription').value;
            const rate = document.getElementById('serviceRate').value;
            
            if (!name || !description || !rate) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (currentEditId && currentEditType === 'service') {
                updateService(currentEditId, name, description, rate);
            } else {
                addNewService(name, description, rate);
                showNotification('Service added successfully!', 'success');
            }
            
            closeServiceModal();
        });

        document.getElementById('clientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('clientName').value;
            const email = document.getElementById('clientEmail').value;
            const phone = document.getElementById('clientPhone').value;
            const service = document.getElementById('clientService').value;
            
            if (!name || !email || !phone || !service) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (currentEditId && currentEditType === 'client') {
                updateClient(currentEditId, name, email, phone, service);
            } else {
                addNewClient(name, email, phone, service);
                showNotification('Client added successfully!', 'success');
            }
            
            closeClientModal();
        });

        document.getElementById('replyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const subject = document.getElementById('replySubject').value;
            const message = document.getElementById('replyMessage').value;
            
            if (!subject || !message) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            showNotification('Reply sent successfully!', 'success');
            closeReplyModal();
        });

        document.getElementById('staffForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('staffFirstName').value;
            const lastName = document.getElementById('staffLastName').value;
            const email = document.getElementById('staffEmail').value;
            const phone = document.getElementById('staffPhone').value;
            const position = document.getElementById('staffPosition').value;
            const location = document.getElementById('staffLocation').value;
            const status = document.getElementById('staffStatus').value;
            const certification = document.getElementById('staffCertification').value;
            const shift = document.getElementById('staffShift').value;
            const joinDate = document.getElementById('staffJoinDate').value;
            const assignment = document.getElementById('staffAssignment').value;
            
            if (!firstName || !lastName || !email || !phone || !position || !location || !status || !certification || !shift || !joinDate || !assignment) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (currentEditId && currentEditType === 'staff') {
                updateStaff(currentEditId, firstName, lastName, email, phone, position, location, status, certification, shift, assignment);
            } else {
                addNewStaff(firstName, lastName, email, phone, position, location, status, certification, shift, joinDate, assignment);
                showNotification('Staff member added successfully!', 'success');
            }
            
            closeStaffModal();
        });

        // Initialize charts
        function initCharts() {
            // Line Chart
            const lineCtx = document.getElementById('lineChart').getContext('2d');
            new Chart(lineCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Service Requests',
                        data: [65, 78, 90, 81, 96, 105],
                        borderColor: '#dc2626',
                        backgroundColor: 'rgba(220, 38, 38, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        },
                        y: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        }
                    }
                }
            });

            // Pie Chart
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Retail Security', 'Corporate Security', 'Event Security', 'Construction Security'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: ['#dc2626', '#3b82f6', '#10b981', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { 
                                color: '#ffffff',
                                padding: 20
                            }
                        }
                    }
                }
            });

            // Purpose Distribution Chart
            const purposeCtx = document.getElementById('purposeChart').getContext('2d');
            new Chart(purposeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Theft Prevention', 'Access Control', 'Crowd Control', 'Asset Protection'],
                    datasets: [{
                        data: [63, 36, 27, 17],
                        backgroundColor: ['#dc2626', '#3b82f6', '#8b5cf6', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { 
                                color: '#ffffff',
                                padding: 20
                            }
                        }
                    }
                }
            });

            // Purpose Trend Chart
            const purposeTrendCtx = document.getElementById('purposeTrendChart').getContext('2d');
            new Chart(purposeTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Theft Prevention',
                            data: [45, 52, 48, 61, 58, 63],
                            borderColor: '#dc2626',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Access Control',
                            data: [28, 32, 35, 33, 38, 36],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Crowd Control',
                            data: [15, 18, 22, 25, 24, 27],
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Asset Protection',
                            data: [12, 14, 16, 15, 18, 17],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        },
                        y: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: '#374151' }
                        }
                    }
                }
            });
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            
            // Add click handlers for navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionName = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    showSection(sectionName);
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => {
                        l.classList.remove('text-wise-red', 'bg-gray-700');
                    });
                    this.classList.add('text-wise-red', 'bg-gray-700');
                });
            });

            // Close modals when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('fixed') && e.target.classList.contains('inset-0')) {
                    closeServiceModal();
                    closeClientModal();
                    closeStaffModal();
                    closeReplyModal();
                }
            });

            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeServiceModal();
                    closeClientModal();
                    closeStaffModal();
                    closeReplyModal();
                }
            });

            // Initialize search functionality
            const searchInput = document.querySelector('input[placeholder*="Search"]');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    // Add search functionality here if needed
                    if (searchTerm.length > 2) {
                        showNotification(`Searching for: ${searchTerm}`, 'info');
                    }
                });
            }

            // Auto-save form data
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                const inputs = form.querySelectorAll('input, textarea, select');
                inputs.forEach(input => {
                    input.addEventListener('input', function() {
                        // Auto-save to localStorage
                        localStorage.setItem(`form_${form.id}_${input.id}`, input.value);
                    });
                });
            });

            // Load saved form data
            forms.forEach(form => {
                const inputs = form.querySelectorAll('input, textarea, select');
                inputs.forEach(input => {
                    const saved = localStorage.getItem(`form_${form.id}_${input.id}`);
                    if (saved && input.type !== 'submit') {
                        input.value = saved;
                    }
                });
            });

            // Add real-time validation
            document.getElementById('serviceName').addEventListener('input', function() {
                if (this.value.length < 3) {
                    this.style.borderColor = '#dc2626';
                } else {
                    this.style.borderColor = '#10b981';
                }
            });

            document.getElementById('clientEmail').addEventListener('input', function() {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(this.value)) {
                    this.style.borderColor = '#dc2626';
                } else {
                    this.style.borderColor = '#10b981';
                }
            });

            // Add tooltips
            const buttons = document.querySelectorAll('button[title]');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'absolute bg-gray-800 text-white px-2 py-1 rounded text-sm z-50';
                    tooltip.textContent = this.getAttribute('title');
                    tooltip.style.top = this.offsetTop - 30 + 'px';
                    tooltip.style.left = this.offsetLeft + 'px';
                    tooltip.id = 'tooltip';
                    document.body.appendChild(tooltip);
                });
                
                button.addEventListener('mouseleave', function() {
                    const tooltip = document.getElementById('tooltip');
                    if (tooltip) {
                        tooltip.remove();
                    }
                });
            });

            // Add loading states
            const submitButtons = document.querySelectorAll('button[type="submit"]');
            submitButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 1000);
                });
            });

            // Add confirmation dialogs for destructive actions
            const deleteButtons = document.querySelectorAll('button[onclick*="delete"]');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    if (!confirm('Are you sure you want to delete this item? This action cannot be undone.')) {
                        e.stopPropagation();
                        e.preventDefault();
                    }
                });
            });

            // Add bulk actions
            let selectedItems = [];
            
            function toggleSelection(id, type) {
                const index = selectedItems.findIndex(item => item.id === id && item.type === type);
                if (index > -1) {
                    selectedItems.splice(index, 1);
                } else {
                    selectedItems.push({ id, type });
                }
                updateBulkActions();
            }

            function updateBulkActions() {
                const bulkBar = document.getElementById('bulkActions');
                if (selectedItems.length > 0) {
                    if (!bulkBar) {
                        const bar = document.createElement('div');
                        bar.id = 'bulkActions';
                        bar.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-wise-red text-white px-6 py-3 rounded-lg shadow-lg z-50';
                        bar.innerHTML = `
                            <div class="flex items-center space-x-4">
                                <span>${selectedItems.length} items selected</span>
                                <button onclick="bulkDelete()" class="bg-red-700 hover:bg-red-800 px-3 py-1 rounded">Delete All</button>
                                <button onclick="clearSelection()" class="bg-gray-600 hover:bg-gray-700 px-3 py-1 rounded">Clear</button>
                            </div>
                        `;
                        document.body.appendChild(bar);
                    } else {
                        bulkBar.querySelector('span').textContent = `${selectedItems.length} items selected`;
                    }
                } else if (bulkBar) {
                    bulkBar.remove();
                }
            }

            window.bulkDelete = function() {
                if (confirm(`Delete ${selectedItems.length} selected items?`)) {
                    selectedItems.forEach(item => {
                        if (item.type === 'service') deleteService(item.id);
                        if (item.type === 'client') deleteClient(item.id);
                        if (item.type === 'review') deleteReview(item.id);
                        if (item.type === 'message') deleteMessage(item.id);
                    });
                    clearSelection();
                    showNotification(`${selectedItems.length} items deleted successfully!`, 'success');
                }
            };

            window.clearSelection = function() {
                selectedItems = [];
                updateBulkActions();
            };

            // Add export functionality
            window.exportData = function(type) {
                let data = [];
                let filename = '';
                
                switch(type) {
                    case 'services':
                        data = Array.from(document.querySelectorAll('[data-service-id]')).map(el => ({
                            name: el.querySelector('h3').textContent,
                            description: el.querySelector('p').textContent,
                            rate: el.querySelector('.text-wise-red').textContent
                        }));
                        filename = 'services.csv';
                        break;
                    case 'clients':
                        data = Array.from(document.querySelectorAll('tr[data-client-id]')).map(el => ({
                            name: el.querySelector('p.font-semibold').textContent,
                            email: el.querySelectorAll('td')[1].querySelector('p').textContent,
                            phone: el.querySelectorAll('td')[1].querySelector('p.text-gray-400').textContent,
                            service: el.querySelector('span.bg-blue-600, span.bg-purple-600, span.bg-green-600, span.bg-orange-600').textContent
                        }));
                        filename = 'clients.csv';
                        break;
                    case 'reviews':
                        data = Array.from(document.querySelectorAll('[data-review-id]')).map(el => ({
                            client: el.querySelector('h4').textContent.split('\n')[0].trim(),
                            rating: el.dataset.rating,
                            service: el.dataset.service,
                            status: el.dataset.status,
                            review: el.querySelector('p.text-gray-300').textContent
                        }));
                        filename = 'reviews.csv';
                        break;
                }
                
                if (data.length > 0) {
                    const csv = convertToCSV(data);
                    downloadCSV(csv, filename);
                    showNotification(`${type} exported successfully!`, 'success');
                }
            };

            function convertToCSV(data) {
                const headers = Object.keys(data[0]);
                const csvContent = [
                    headers.join(','),
                    ...data.map(row => headers.map(header => `"${row[header]}"`).join(','))
                ].join('\n');
                return csvContent;
            }

            function downloadCSV(csv, filename) {
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                window.URL.revokeObjectURL(url);
            }

            // Add print functionality
            window.printSection = function(sectionId) {
                const section = document.getElementById(sectionId);
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                        <head>
                            <title>WiseK9 Security - ${sectionId}</title>
                            <style>
                                body { font-family: Arial, sans-serif; margin: 20px; }
                                .bg-wise-gray { background: #f5f5f5; }
                                .text-white { color: #000; }
                                .hidden { display: none !important; }
                                button { display: none; }
                            </style>
                        </head>
                        <body>
                            <h1>WiseK9 Security Dashboard - ${sectionId}</h1>
                            ${section.innerHTML}
                        </body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.print();
            };

            // Add advanced search
            window.advancedSearch = function(query, filters = {}) {
                const results = [];
                
                // Search in services
                document.querySelectorAll('[data-service-id]').forEach(el => {
                    const text = el.textContent.toLowerCase();
                    if (text.includes(query.toLowerCase())) {
                        results.push({ type: 'service', element: el, relevance: calculateRelevance(text, query) });
                    }
                });
                
                // Search in clients
                document.querySelectorAll('tr[data-client-id]').forEach(el => {
                    const text = el.textContent.toLowerCase();
                    if (text.includes(query.toLowerCase())) {
                        results.push({ type: 'client', element: el, relevance: calculateRelevance(text, query) });
                    }
                });
                
                // Search in reviews
                document.querySelectorAll('[data-review-id]').forEach(el => {
                    const text = el.textContent.toLowerCase();
                    if (text.includes(query.toLowerCase())) {
                        results.push({ type: 'review', element: el, relevance: calculateRelevance(text, query) });
                    }
                });
                
                // Sort by relevance
                results.sort((a, b) => b.relevance - a.relevance);
                
                return results;
            };

            function calculateRelevance(text, query) {
                const words = query.toLowerCase().split(' ');
                let score = 0;
                words.forEach(word => {
                    const matches = (text.match(new RegExp(word, 'g')) || []).length;
                    score += matches;
                });
                return score;
            }

            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 'n':
                            e.preventDefault();
                            if (document.getElementById('services').style.display !== 'none') {
                                openServiceModal();
                            } else if (document.getElementById('clients').style.display !== 'none') {
                                openClientModal();
                            }
                            break;
                        case 's':
                            e.preventDefault();
                            document.querySelector('input[placeholder*="Search"]').focus();
                            break;
                        case 'e':
                            e.preventDefault();
                            const currentSection = document.querySelector('.section:not(.hidden)').id;
                            exportData(currentSection);
                            break;
                        case 'p':
                            e.preventDefault();
                            const activeSection = document.querySelector('.section:not(.hidden)').id;
                            printSection(activeSection);
                            break;
                    }
                }
            });

            // Add auto-refresh for real-time updates
            setInterval(() => {
                // Simulate real-time updates
                const notifications = document.querySelector('.notification-badge');
                if (notifications && Math.random() > 0.95) {
                    const currentCount = parseInt(notifications.textContent);
                    notifications.textContent = currentCount + 1;
                    showNotification('New notification received', 'info');
                }
            }, 30000); // Check every 30 seconds

            // Add performance monitoring
            const performanceObserver = new PerformanceObserver((list) => {
                list.getEntries().forEach((entry) => {
                    if (entry.duration > 100) {
                        console.warn(`Slow operation detected: ${entry.name} took ${entry.duration}ms`);
                    }
                });
            });
            
            if (window.PerformanceObserver) {
                performanceObserver.observe({ entryTypes: ['measure', 'navigation'] });
            }

            // Add error handling
            window.addEventListener('error', function(e) {
                console.error('JavaScript error:', e.error);
                showNotification('An error occurred. Please refresh the page.', 'error');
            });

            // Add offline detection
            window.addEventListener('online', () => {
                showNotification('Connection restored', 'success');
            });
            
            window.addEventListener('offline', () => {
                showNotification('Connection lost. Working offline.', 'warning');
            });

            console.log('WiseK9 Security Dashboard initialized successfully!');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9832b954e2eec7aa',t:'MTc1ODU1Mzc3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
